{% extends 'layouts/main.html' %}

{% block content %}
   <div class="row">
      <div class="col-md-12">
         <div id="kanban"></div>
      </div>
   </div>
{% endblock %}

{% block additional_js %}
<script>
$(document).ready(function() {

    $.ajax({
        url: '/api/atividades'
    }).done(function(quadros){
        const Kanban = new jKanban({
                element : '#kanban',
                gutter  : '10px',
                widthBoard  : '300px',
                breakLine: true,
                dropEl: function (el, target) {

                    $.post({
                        url: '/api/atividade_estagio',
                        data: {
                            'atividade_id': $(el).data('eid'),
                            'estagio_id': $(target).parent().data('id')
                        },
                        dataType: 'json'
                    }).fail(function(error) {
                        console.log(error);
                    });

                },
                boards  :quadros
        });
    });

});
</script>
{% endblock %}